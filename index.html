
.page.active {
  display: block;
}

/* arrows */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 48px;
  color: white;
  cursor: pointer;
  opacity: 0.6;
  user-select: none;
  z-index: 10;
}

.arrow:hover {
  opacity: 1;
}

#prev { left: 20px; }
#next { right: 20px; }

/* dots */
#dots {
  position: absolute;
  bottom: 30px;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #555;
}

.dot.active {
  background: white;
}

/* mobile */
@media (max-width: 768px) {
  #front {
    flex-direction: column;
    gap: 40px;
  }
}
</style>
</head>

<body>

<!-- FRONT PAGE -->
<div id="front">
  <img src="zine-icon.png" class="icon" id="openZine" alt="zine">
  <a href="download.zip" download>
    <img src="download-icon.png" class="icon" alt="download">
  </a>
</div>

<!-- ZINE VIEW -->
<div id="zine">
  <div id="back">← back</div>

  <div id="page-container"></div>

  <div id="prev" class="arrow">‹</div>
  <div id="next" class="arrow">›</div>

  <div id="dots"></div>
</div>

<script>
const front = document.getElementById("front");
const zine = document.getElementById("zine");
const container = document.getElementById("page-container");
const dots = document.getElementById("dots");

const totalPages = 18;
let current = 0;
const pages = [];

/* build pages */
for (let i = 1; i <= totalPages; i++) {
  const img = document.createElement("img");
  img.src = `page${String(i).padStart(2, "0")}.png`;
  img.className = "page";
  if (i === 1) img.classList.add("active");
  container.appendChild(img);
  pages.push(img);

  const dot = document.createElement("div");
  dot.className = "dot" + (i === 1 ? " active" : "");
  dots.appendChild(dot);
}

function showPage(i) {
  pages[current].classList.remove("active");
  dots.children[current].classList.remove("active");

  current = i;

  pages[current].classList.add("active");
  dots.children[current].classList.add("active");
}

/* open zine */
document.getElementById("openZine").onclick = () => {
  front.style.display = "none";
  zine.style.display = "block";
};

/* back button with fade */
document.getElementById("back").onclick = () => {
  zine.style.opacity = 0;
  setTimeout(() => {
    zine.style.display = "none";
    zine.style.opacity = 1;
    front.style.display = "flex";
  }, 200);
};

document.getElementById("next").onclick = () => {
  if (current < totalPages - 1) showPage(current + 1);
};

document.getElementById("prev").onclick = () => {
  if (current > 0) showPage(current - 1);
};

/* swipe */
let startX = 0;
container.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

container.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  if (dx > 50 && current > 0) showPage(current - 1);
  if (dx < -50 && current < totalPages - 1) showPage(current + 1);
});
</script>

</body>
</html>
